



<!-- warehouse_detail.html -->
<h1>{{ warehouse.name }} Details</h1>
<p>Location: {{ warehouse.location }}</p>
<p>Capacity: {{ warehouse.capacity }}</p>
<p>Status: {{ warehouse.get_status_display }}</p>
<p>Warehouse Type: {{ warehouse.get_warehouse_type_display }}</p>

<h2>Products in this Warehouse:</h2>
<ul>
    {% for product in products %}
        <li>
            <strong>{{ product.name }}</strong> - Stock: {{ product.stock_quantity }} - Price: {{ product.price }}

            {% if product in low_stock_warning %}
                <p style="color: red;">Warning: Low Stock!</p>
            {% endif %}

            <!-- Form for adding/removing stock -->
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ product.id }}">
                
                <!-- Add stock -->
                <label for="quantity_add_{{ product.id }}">Add Quantity:</label>
                <input type="number" name="quantity" id="quantity_add_{{ product.id }}" min="1" required><br>

                <!-- Display error for invalid quantity -->
                {% if messages %}
                    {% for message in messages %}
                        {% if message.tags == "error" %}
                            <p style="color: red;">{{ message }}</p>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                
                <button type="submit" name="action" value="add">Add Stock</button>
            </form>
            
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ product.id }}">
                
                <!-- Remove stock -->
                <label for="quantity_remove_{{ product.id }}">Remove Quantity:</label>
                <input type="number" name="quantity" id="quantity_remove_{{ product.id }}" min="1" max="{{ product.stock_quantity }}" required><br>

                <!-- Display error for invalid quantity -->
                {% if messages %}
                    {% for message in messages %}
                        {% if message.tags == "error" %}
                            <p style="color: red;">{{ message }}</p>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                
                <button type="submit" name="action" value="remove">Remove Stock</button>
            </form>
        </li>
    {% endfor %}
</ul>

<h3>Add a New Product:</h3>
<form method="post">
    {% csrf_token %}
    <label for="name">Product Name:</label><br>
    <input type="text" id="name" name="name" required><br><br>
    
    <label for="price">Price:</label><br>
    <input type="number" id="price" name="price" step="0.01" required><br><br>
    
    <label for="stock_quantity">Stock Quantity:</label><br>
    <input type="number" id="stock_quantity" name="stock_quantity" min="1" required><br><br>
    
    <button type="submit">Add Product</button>
</form>

<!-- Display success or error messages -->
{% if messages %}
    <ul>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}
